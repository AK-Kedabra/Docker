# Dockerfile - Основные Правила и Инструкции

**Dockerfile** - это текстовый файл, содержащий инструкции для автоматической сборки Docker-образа. Вот основные правила и инструкции для создания Dockerfile:

1. **Выбор базового образа**: Начните с указания базового образа. Это может быть официальный образ из Docker Hub, такой как `ubuntu`, `alpine`, или другие, в зависимости от ваших потребностей.

    ```dockerfile
    FROM ubuntu:latest
    ```

2. **Обновление и установка пакетов**: Если используете образ Linux, обновите пакеты и установите необходимые зависимости.

    ```dockerfile
    RUN apt-get update && \
        apt-get install -y package1 package2
    ```

3. **Копирование файлов в образ**: Используйте `COPY` для копирования локальных файлов в образ.

    ```dockerfile
    COPY ./local-path /app
    ```

4. **Настройка рабочей директории**: С помощью `WORKDIR` установите рабочую директорию внутри контейнера.

    ```dockerfile
    WORKDIR /app
    ```

5. **Запуск команд и приложений**: Используйте `CMD` или `ENTRYPOINT` для указания команды или приложения, которые будут запущены при запуске контейнера.

    ```dockerfile
    CMD ["app-command", "arg1", "arg2"]
    ```

6. **Экспозиция портов**: Если ваше приложение слушает определенный порт, используйте `EXPOSE` для указания этого порта.

    ```dockerfile
    EXPOSE 80
    ```

7. **Оптимизация слоев образа**: Объединяйте команды для оптимизации количества слоев в образе. Это уменьшает размер образа и улучшает производительность.

    ```dockerfile
    RUN apt-get update && \
        apt-get install -y package1 package2 && \
        rm -rf /var/lib/apt/lists/*
    ```

8. **Использование переменных окружения**: Используйте `ENV` для установки переменных окружения в контейнере.

    ```dockerfile
    ENV MY_VARIABLE=value
    ```

9. **Удаление временных файлов**: После установки пакетов или выполнения других действий удаляйте временные файлы и кэши.

    ```dockerfile
    RUN apt-get clean && \
        rm -rf /var/lib/apt/lists/*
    ```

10. **Документация**: Добавьте комментарии или метаданные для улучшения читаемости и понимания Dockerfile.

    ```dockerfile
    # Этот образ используется для ...
    ```
